[–õ–¶–¢_final.pdf](https://github.com/user-attachments/files/22666614/_final.pdf)[–õ–¶–¢_final.pdf](https://github.com/user-attachments/files/22666520/_final.pdf)# Feedback Analyzer Platform
---
## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –ø–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—é —Å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–º –∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–º –∞–Ω—Å–∞–º–±–ª–∏–µ–≤—ã–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—â–∏–º –æ—Ç–∑—ã–≤, –æ–ø—Ä–µ–¥–µ–ª–µ—è—é—â–∏–º –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –æ—Ç–∑—ã–≤–∞ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –ø—Ä–æ–¥—É–∫—Ç—É, –∞ —Ç–∞–∫–∂–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–º –Ω–∞—Å—Ç–æ–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π, –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π). –°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ  —Å **API Gateway**, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å **Kafka** –∏ **ClickHouse**. –í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –¥–∞—à–±–æ—Ä–¥ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –æ—Ç–∑—ã–≤–æ–≤ –ø–æ –¥–∞—Ç–∞–º, –∞ —Ç–∞–∫–∂–µ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Å–æ—Å—Ç–∞–≤–ª—è—é—â—É—é –≤—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞.

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `docker-compose` –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–∑—ã–≤–æ–≤, –∞ —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –º–æ–¥–µ–ª–∏, –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞—à–±–æ—Ä–¥–∞


---


## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **API Gateway** ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ (Go, Chi). –ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (–≤–∫–ª—é—á–∞—è storage-service).
- **storage-service** ‚Äî —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü–∞–º–∏ ClickHouse, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä—É—á–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä—É—á–∫–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–ª—É—à–∞–µ—Ç Kafka-—Ç–æ–ø–∏–∫ —Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏ –æ—Ç–∑—ã–≤–∞–º–∏.
- **ClickHouse** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –°–£–ë–î (—Ö—Ä–∞–Ω–∏—Ç processed_data).
- **Kafka + Zookeeper** ‚Äî –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ–±–º–µ–Ω–∞ —Å–æ–±—ã—Ç–∏—è–º–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.
- **Kafdrop** ‚Äî –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Kafka.
- **Superset** ‚Äî –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–∞.
- **ModelService** ‚Äî –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —Å –∞–Ω—Å–∞–º–±–ª–∏–µ–≤—ã–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º.


---


## üöÄ –ó–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

   ```bash
   git clone https://github.com/Segun228/gazprom_feedback_analyzer_man
   cd gazprom_feedback_analyzer_man
   ```

2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

   ```bash
   cp .env.example .env
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã:

    ```bash
    docker-compose up --build
    ```

4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –ø–æ–¥–Ω—è–ª–æ—Å—å:

   - **API Gateway**: `http://localhost:3000`
   - **Grafana Dashboard**: `http://localhost:3000/dashboard` (admin/admin123)
   - **storage-service**: `http://localhost:3001`
   - **ClickHouse (HTTP)**: `http://localhost:8123`
   - **Kafka (–ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø)**: localhost:29092
   - **Kafdrop**: `http://localhost:19000`

### üåç –î–µ–ø–ª–æ–π –Ω–∞ production/–Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä

**–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:**

```env
# –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω
HTTP_PUBLIC_DOMAIN=your-domain.com:3000

# ClickHouse
CLICKHOUSE_DB=db
CLICKHOUSE_USER=admin
CLICKHOUSE_PASSWORD=password
```

```bash
docker compose up -d
```

> üéâ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Grafana –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤ (`*.template`) —Å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ `.env` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ.

```bash
docker compose up -d
```

---


## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```markdown
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Gazprom Feedback Analyzer

## üìÅ –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

```bash
gazprom_feedback_analyzer/
‚îú‚îÄ‚îÄ üìÅ api-gateway/          # API-—à–ª—é–∑ –Ω–∞ Go
‚îú‚îÄ‚îÄ üìÅ custom_small_models/  # –ö–∞—Å—Ç–æ–º–Ω—ã–µ ML-–º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ üìÅ grafana_provisioning/ # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Grafana
‚îú‚îÄ‚îÄ üìÅ health/               # Health-check —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ üìÅ model-service/        # ML-—Å–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏–∑–∞ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ üìÅ parser/               # –ü–∞—Ä—Å–µ—Ä—ã –æ—Ç–∑—ã–≤–æ–≤
‚îú‚îÄ‚îÄ üìÅ storage-service/      # –°–µ—Ä–≤–∏—Å —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ üìÑ docker-compose.yaml   # Docker –∫–æ–º–ø–æ–Ω–æ–≤–∫–∞
‚îú‚îÄ‚îÄ üìÑ requirements.txt      # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ üìÑ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

### 1. **API Gateway** (`/api-gateway`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Go
- **–§–∞–π–ª—ã**:
  - `main.go` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä
  - `config/` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  - `Dockerfile` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

### 2. **Model Service** (`/model-service`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–æ–≤
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Python, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã
- **–ú–æ–¥–µ–ª–∏**:
  - `sentimentmodel/` - –º–æ–¥–µ–ª—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
  - `sklearn_model.pkl` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è ML –º–æ–¥–µ–ª—å
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: Kafka –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### 3. **Storage Service** (`/storage-service`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Go, –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
  - `database/` - —Ä–∞–±–æ—Ç–∞ —Å –ë–î
  - `messaging/` - Kafka consumer
  - `migrations/` - –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º—ã –ë–î
  - `seeders/` - –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### 4. **Parser Services** (`/parser`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–±–æ—Ä –æ—Ç–∑—ã–≤–æ–≤ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:
  - `banki_ru/` - –ø–∞—Ä—Å–µ—Ä banki.ru
  - `gzpb_site/` - –ø–∞—Ä—Å–µ—Ä —Å–∞–π—Ç–∞ –ì–∞–∑–ø—Ä–æ–º–±–∞–Ω–∫–∞
  - `recommend/` - –ø–∞—Ä—Å–µ—Ä irecommend.ru
  - `vse_zaimi/` - –ø–∞—Ä—Å–µ—Ä vsezaimi.ru
- **–î–∞–Ω–Ω—ã–µ**: CSV, JSON, Excel —Ñ–∞–π–ª—ã —Å –æ—Ç–∑—ã–≤–∞–º–∏

### 5. **Health Service** (`/health`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Python, FastAPI
- **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã**: Health-check –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã

### 6. **Custom Models** (`/custom_small_models`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ ML –º–æ–¥–µ–ª—è–º–∏
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: CatBoost, Jupyter notebooks
- **–î–∞–Ω–Ω—ã–µ**: 
  - `raw.xlsx` - –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  - –ú–æ–¥–µ–ª–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è

### 7. **Monitoring** (`/grafana_provisioning`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏ –¥–∞—à–±–æ—Ä–¥—ã
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
  - `dashboards/` - Grafana –¥–∞—à–±–æ—Ä–¥—ã
  - `datasources/` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ClickHouse
  - `entrypoint.sh` - —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **`docker-compose.yaml`** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **`requirements.txt`** - Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **–ö–æ–Ω—Ñ–∏–≥–∏**: YAML —Ñ–∞–π–ª—ã –≤ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ

---

## üìä –î–∞–Ω–Ω—ã–µ

–ü—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ—Ç–∑—ã–≤–∞–º–∏ –æ –ì–∞–∑–ø—Ä–æ–º–±–∞–Ω–∫–µ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
- –ë–∞–Ω–∫–∏.—Ä—É
- –°–∞–π—Ç –ì–∞–∑–ø—Ä–æ–º–±–∞–Ω–∫–∞  
- IRecommend.ru
- VseZaimi.ru

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

- **processed_data**

   | –ü–æ–ª–µ      | –§–æ—Ä–º–∞—Ç        | –û–ø–∏—Å–∞–Ω–∏–µ                          |
   | --------- | ------------- | --------------------------------- |
   | id        | UInt64        | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä          |
   | text      | String        | –¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞                      |
   | date      | DateTime      | –î–∞—Ç–∞ –æ—Ç–∑—ã–≤–∞                       |
   | sentiment | UInt8         | –û—Ü–µ–Ω–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è: 0, 1 –∏–ª–∏ 2     |
   | tags      | Array(String) | –ú–∞—Å—Å–∏–≤ —Ç–µ–≥–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –æ—Ç–∑—ã–≤–æ–º |


---

## üåê –ü–æ—Ä—Ç—ã

| –°–µ—Ä–≤–∏—Å          | –ó–∞–Ω–∏–º–∞–µ–º—ã–π(-—ã–µ) –ø–æ—Ä—Ç(-—ã) | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                          |
| --------------- | ------------------------ | ----------------------------------- |
| API Gateway     | `3000`                   | HTTP API                            |
| Storage service | `3001`                   | HTTP API storage-service            |
| ClickHouse      | `8123`                   | HTTP –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (REST/SQL)           |
|                 | `9000`                   | TCP –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (native client)       |
|                 | `9009`                   | –ü—Ä–æ—Ç–æ–∫–æ–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (optional)  |
| Zookeeper       | `2181`                   | –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è              |
| Kafka           | `9092`                   | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã) |
|                 | `29092`                  | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å —Ö–æ—Å—Ç–∞ (localhost)     |
| Kafdrop         | `19000`                  | –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è Kafka             |

---

## üîó –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–æ—É—Ç—ã

### storage-service

- `GET /storage/health` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
- `POST /storage` ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
- `GET /storage` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
- `GET /storage/{id}` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É
- `DELETE /storage/{id}` ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É

---

## üéØ Kafka

### –¢–æ–ø–∏–∫ `processed_data`

–¢–æ–ø–∏–∫ `processed_data` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –±–∞—Ç—á–µ–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏. –ö–∞–∂–¥—ã–π –±–∞—Ç—á —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤-–æ—Ç–∑—ã–≤–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∑–∞–ø–∏—Å–∏ –≤ ClickHouse.

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏—è (batch):**

```json
{
  "batch": [
    {
      "text": "–û—Ç–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å!",
      "date": "2024-06-09T12:34:56Z",
      "sentiment": 2,
      "tags": ["–±—ã—Å—Ç—Ä–æ", "–¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ"]
    },
    {
      "text": "–ú–æ–≥–ª–æ –±—ã—Ç—å –ª—É—á—à–µ.",
      "date": "2024-06-09T13:00:00Z",
      "sentiment": 1,
      "tags": ["–º–µ–¥–ª–µ–Ω–Ω–æ"]
    }
  ]
}
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**

- –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –±–∞—Ç—á–∞–º–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
- –ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –≤–Ω—É—Ç—Ä–∏ batch —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ç–∞–±–ª–∏—Ü—ã `processed_data` –±–µ–∑ –ø–æ–ª—è `ID`.

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- ClickHouse CLI:

```bash
   docker exec -it clickhouse clickhouse-client -u user --password password
```

- Health check (—á–µ—Ä–µ–∑ gateway):

```bash
   curl -v http://localhost:3000/storage/health
```

- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ storage-service:

```bash
   docker logs -f storage-service
```

- –õ–æ–≥–∏ API Gateway:

```bash
   docker logs -f api-gateway
```

- –°–ø–∏—Å–æ–∫ —Ç–æ–ø–∏–∫–æ–≤ Kafka:

```bash
   docker exec -it kafka kafka-topics --bootstrap-server localhost:9092 --list
```

---

## üìä –†–∞–±–æ—Ç–∞ —Å –¥–∞—à–±–æ—Ä–¥–æ–º

### –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∞—à–±–æ—Ä–¥

–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –¥–∞—à–±–æ—Ä–¥–æ–º –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç

–¢–∞–º, –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å—Å–æ–≤–∞–Ω—ã –Ω–∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∞—à–±–æ—Ä–¥

–í –¥–∞—à–±–æ—Ä–¥–µ –≤–∞–º –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –≤–≤–µ—Å—Ç–∏ –∏–º—è –∏ –ø–∞—Ä–æ–ª—å, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ, —á—Ç–æ —É–∫–∞–∑–∞–Ω—ã –≤ .env



–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—É–¥–µ—Ç –≤—ã–±—Ä–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥

### –ì—Ä–∞—Ñ–∏–∫–∏ –≤ –¥–∞—à–±–æ—Ä–¥–µ

- –í –¥–∞—à–±–æ—Ä–¥–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ª–æ–≥–∏—á–µ—Å–∫–∏ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞–Ω–µ–ª–µ–π, –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –≤—Å–µ –∏–∑ –Ω–∏—Ö
- –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–±–ª–µ–∂–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫, –≤—ã–±–∏—Ä–∞—è –∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
- –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±–∏—Ä–∞—Ç—å —Ç–æ—á–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –≤—ã–±–æ—Ä–∞ –¥–∞—Ç –Ω–∞–≤–µ—Ä—Ö—É –¥–∞—à–±–æ—Ä–¥–∞
- –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫–ª—é—á–∞—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞–∂–∞—Ç–∏–µ–º –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—é—â–µ–π –∏–∫–æ–Ω–∫–µ –≤ –ª–µ–≥–µ–Ω–¥–µ

## üé• –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã

[–î–µ–º–æ –≤–∏–¥–µ–æ —Ä–∞–±–æ—Ç—ã](https://disk.yandex.ru/i/P_cESB_RFAJBAA)




